<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2563eb" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>주역 실사용 GUI</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <h1 data-i18n="app.title">주역 실사용 GUI</h1>
    <p class="sub" data-i18n="app.subtitle">질문 설정 → 동전 던지기(6회) → 본괘/지괘 확인 → 괘 해설 조회</p>

    <section class="card">
      <label for="question" data-i18n="label.question">질문</label>
      <input id="question" type="text" placeholder="예: 이직 제안을 이번 달에 수락해도 될까?" />
      <div class="meta-row">
        <label for="localeSelect" data-i18n="label.language">언어</label>
        <select id="localeSelect"></select>
        <label for="questionTag" data-i18n="label.tag">질문 태그</label>
        <select id="questionTag">
          <option value="일반" data-i18n="tag.general">일반</option>
          <option value="직장" data-i18n="tag.work">직장</option>
          <option value="사업" data-i18n="tag.business">사업</option>
          <option value="인간관계" data-i18n="tag.relationship">인간관계</option>
        </select>
        <label for="questionTemplate" data-i18n="label.template">질문 템플릿</label>
        <select id="questionTemplate">
          <option value="" data-i18n="option.none">선택 안함</option>
        </select>
        <button id="btnApplyTemplate" class="ghost" data-i18n="btn.applyTemplate">템플릿 적용</button>
        <button id="btnClearAllData" class="ghost danger" data-i18n="btn.clearAllData">앱 데이터 전체 초기화</button>
      </div>
    </section>

    <section class="grid">
      <div class="card">
        <h2 data-i18n="section.generate">1) 괘 생성</h2>
        <div class="btn-row">
          <button id="btnAuto" data-i18n="btn.auto">＋ 자동 1효</button>
          <button id="btnUndo" data-i18n="btn.undo">↶ 취소</button>
          <button id="btnReset" class="ghost" data-i18n="btn.reset">⟲ 초기화</button>
        </div>
        <div class="manual">
          <span data-i18n="label.manual">수동 입력:</span>
          <button data-val="6">6 (노음)</button>
          <button data-val="7">7 (소양)</button>
          <button data-val="8">8 (소음)</button>
          <button data-val="9">9 (노양)</button>
        </div>
        <p id="progress">현재 0 / 6 효</p>
        <ol id="lineList" class="line-list"></ol>
      </div>

      <div class="card">
        <h2 data-i18n="section.result">2) 결과</h2>
        <div class="result-grid">
          <div>
            <h3 data-i18n="result.primary">본괘</h3>
            <p id="primaryInfo" class="info"></p>
            <div id="primaryHex" class="hex"></div>
          </div>
          <div>
            <h3 data-i18n="result.related">지괘</h3>
            <p id="relatedInfo" class="info"></p>
            <div id="relatedHex" class="hex"></div>
          </div>
        </div>
        <p id="changing"></p>
        <p id="readingGuide" class="guide"></p>

        <div class="rule-box">
          <h3 data-i18n="rule.title">효사 우선 읽기 규칙</h3>
          <div id="ruleButtons" class="rule-buttons"></div>
          <p id="ruleOutput" class="rule-output" data-i18n="rule.pending">6효 완성 후 규칙이 자동 추천됩니다.</p>
          <div class="xici-box">
            <h4 data-i18n="xici.title">계사전 핵심 원칙</h4>
            <p id="xiciTitle" class="xici-title" data-i18n="xici.pendingTitle">6효 완성 후 원칙이 표시됩니다.</p>
            <p id="xiciBody" class="xici-body" data-i18n="xici.pendingBody">괘의 흐름을 과장하지 않고, 현재 상황을 바르게 분별하는 데 사용하세요.</p>
          </div>
          <div class="advice-box">
            <h4 data-i18n="advice.title">실행 권고 문구</h4>
            <p id="transitionBadge" class="transition-badge badge-neutral" data-i18n="weight.pending">가중 단계: 대기</p>
            <p id="transitionHint" class="transition-hint" data-i18n="hint.click">배지를 클릭하면 단계 해설이 표시됩니다.</p>
            <ul id="transitionGuideList" class="transition-guide-list"></ul>
            <p id="practiceAdvice" class="practice-advice" data-i18n="advice.pending">질문 태그와 변효 흐름을 결합한 권고가 여기에 표시됩니다.</p>
          </div>
          <div class="checklist-box">
            <h4 data-i18n="check.title">즉시 행동 체크 (예/아니오)</h4>
            <div id="actionChecklist" class="action-checklist"></div>
            <p id="checkSummary" class="check-summary" data-i18n="check.pending">체크 항목이 아직 없습니다.</p>
            <div class="export-row">
              <button id="btnExportJson" class="ghost" data-i18n="btn.exportJson">⌘ JSON 내보내기</button>
              <button id="btnExportTxt" class="ghost" data-i18n="btn.exportTxt">≡ TXT 내보내기</button>
              <button id="btnImportJson" class="ghost" data-i18n="btn.importJson">⌘ JSON 불러오기</button>
              <button id="btnSaveRecent" class="ghost" data-i18n="btn.saveRecent">↧ 최근 저장</button>
              <button id="btnClearRecent" class="ghost" data-i18n="btn.clearRecent">✕ 최근 삭제</button>
              <input id="importJsonFile" type="file" accept="application/json,.json" hidden />
            </div>
            <div class="recent-box">
              <h4 data-i18n="recent.title">최근 기록 (최대 5개)</h4>
              <div class="recent-filter-row">
                <label for="recentFilter" data-i18n="recent.filter">필터</label>
                <select id="recentFilter">
                  <option value="전체" data-i18n="filter.all">전체</option>
                  <option value="일반" data-i18n="tag.general">일반</option>
                  <option value="직장" data-i18n="tag.work">직장</option>
                  <option value="사업" data-i18n="tag.business">사업</option>
                  <option value="인간관계" data-i18n="tag.relationship">인간관계</option>
                </select>
              </div>
              <div id="recentRecords" class="recent-records"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2 data-i18n="section.lookup">3) 괘 해설 조회 (번호 직접 선택)</h2>
      <div class="lookup">
        <input id="hexNo" type="number" min="1" max="64" placeholder="1~64" data-i18n-placeholder="input.hex.placeholder" />
        <button id="btnLookup" data-i18n="btn.lookup">조회</button>
      </div>
      <div id="lookupResult" class="lookup-result"></div>
      <small class="note" data-i18n="lookup.note">팁: 자동 결과가 나오더라도 번호 조회로 다른 괘와 비교 학습해 보세요.</small>
    </section>

    <section class="card">
      <h2 data-i18n="section.docs">4) 참고 문서 바로가기</h2>
      <ul>
        <li><a href="../01_주역_전체_자료집.md">01_주역_전체_자료집.md</a></li>
        <li><a href="../02_64괘_한줄해설_입문.md">02_64괘_한줄해설_입문.md</a></li>
        <li><a href="../04_64괘_실전적용_직장사업인간관계.md">04_64괘_실전적용_직장사업인간관계.md</a></li>
        <li><a href="../05_64괘_의사결정_체크리스트_예아니오.md">05_64괘_의사결정_체크리스트_예아니오.md</a></li>
      </ul>
    </section>
  </main>

  <script src="i18n.js"></script>
  <script src="hex_practice_data.js"></script>
  <script src="app.js"></script>
</body>
</html>
